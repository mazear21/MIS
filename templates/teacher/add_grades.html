{% extends 'base.html' %} {% block title %}Add Grades - {{ subject.name }}{% endblock %} {% block
content %}
<div class="container">
  <!-- Page Header -->
  <div class="page-header">
    <div class="row align-items-center">
      <div class="col">
        <h2><i class="bi bi-clipboard-plus me-2"></i>Add Grades</h2>
        <p>{{ subject.name }} - {{ subject.class_name }}</p>
      </div>
      <div class="col-auto">
        <a href="{{ url_for('teacher_grades') }}" class="btn btn-outline-secondary">
          <i class="bi bi-arrow-left me-1"></i>Back
        </a>
      </div>
    </div>
  </div>

  <!-- Add Grades Form -->
  <div class="card">
    <div class="card-header"><i class="bi bi-clipboard-data me-2"></i>Grade Details</div>
    <div class="card-body">
      <form method="POST" action="{{ url_for('teacher_add_grades', subject_id=subject.id) }}">
        <!-- Grade Info -->
        <div class="row mb-4">
          <div class="col-md-3">
            <label class="form-label">Grade Type <span class="text-danger">*</span></label>
            <select name="grade_type" class="form-select" required>
              <option value="">Select type...</option>
              <option value="quiz">Quiz</option>
              <option value="homework">Homework</option>
              <option value="exam">Exam</option>
              <option value="midterm">Midterm</option>
              <option value="final">Final</option>
              <option value="project">Project</option>
            </select>
          </div>
          <div class="col-md-3">
            <label class="form-label">Title <span class="text-danger">*</span></label>
            <input
              type="text"
              name="title"
              class="form-control"
              required
              placeholder="e.g., Quiz 1"
            />
          </div>
          <div class="col-md-3">
            <label class="form-label">Max Score</label>
            <input type="number" name="max_score" class="form-control" value="100" min="1" />
          </div>
          <div class="col-md-3">
            <label class="form-label">Date</label>
            <input
              type="date"
              name="date"
              class="form-control"
              value="{{ today if today else '' }}"
            />
          </div>
        </div>

        {% if students %}
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>#</th>
                <th>Student Number</th>
                <th>Student Name</th>
                <th>Score</th>
                <th>Notes</th>
              </tr>
            </thead>
            <tbody>
              {% for student in students %}
              <tr>
                <td>{{ loop.index }}</td>
                <td>{{ student.student_number or '-' }}</td>
                <td><strong>{{ student.full_name }}</strong></td>
                <td>
                  <input
                    type="number"
                    name="score_{{ student.id }}"
                    class="form-control form-control-sm"
                    style="width: 100px"
                    min="0"
                    step="0.5"
                    placeholder="Score"
                  />
                </td>
                <td>
                  <input
                    type="text"
                    name="notes_{{ student.id }}"
                    class="form-control form-control-sm"
                    placeholder="Optional notes"
                  />
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

        <hr class="my-4" />
        <div class="d-flex justify-content-between align-items-center">
          <span class="badge bg-navy fs-6">Total Students: {{ students|length }}</span>
          <button type="submit" class="btn btn-primary">
            <i class="bi bi-save me-1"></i>Save Grades
          </button>
        </div>
        {% else %}
        <div class="text-center py-5">
          <i class="bi bi-people text-muted" style="font-size: 4rem"></i>
          <h5 class="mt-3">No Students in This Semester</h5>
          <p class="text-muted">There are no students enrolled in this semester.</p>
        </div>
        {% endif %}
      </form>
    </div>
  </div>
</div>
{% endblock %}
