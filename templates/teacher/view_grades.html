{% extends 'base.html' %} {% block title %}View Grades - {{ subject.name }}{% endblock %} {% block
content %}
<div class="container">
  <!-- Page Header -->
  <div class="page-header">
    <div class="row align-items-center">
      <div class="col">
        <h2><i class="bi bi-clipboard-data me-2"></i>View Grades</h2>
        <p>{{ subject.name }} - {{ subject.class_name }}</p>
      </div>
      <div class="col-auto">
        <a href="{{ url_for('teacher_grades') }}" class="btn btn-outline-secondary">
          <i class="bi bi-arrow-left me-1"></i>Back
        </a>
        <a
          href="{{ url_for('teacher_add_grades', subject_id=subject.id) }}"
          class="btn btn-primary"
        >
          <i class="bi bi-plus-lg me-1"></i>Add Grades
        </a>
      </div>
    </div>
  </div>

  <!-- Grades Table -->
  <div class="card">
    <div class="card-body">
      {% if grades %}
      <div class="table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Date</th>
              <th>Type</th>
              <th>Title</th>
              <th>Student</th>
              <th>Score</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            {% for grade in grades %}
            <tr>
              <td>{{ grade.date }}</td>
              <td><span class="badge bg-navy-light">{{ grade.grade_type|title }}</span></td>
              <td>{{ grade.title }}</td>
              <td><strong>{{ grade.student_name }}</strong></td>
              <td>
                <strong>{{ grade.score }}</strong> / {{ grade.max_score }} {% set percentage =
                (grade.score / grade.max_score * 100) if grade.max_score else 0 %}
                <div class="progress mt-1" style="height: 5px; width: 80px">
                  <div
                    class="progress-bar {% if percentage >= 60 %}bg-success{% elif percentage >= 40 %}bg-warning{% else %}bg-danger{% endif %}"
                    style="width: {{ percentage }}%;"
                  ></div>
                </div>
              </td>
              <td>{{ grade.notes or '-' }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <div class="text-center py-5">
        <i class="bi bi-clipboard text-muted" style="font-size: 4rem"></i>
        <h5 class="mt-3">No Grades Recorded</h5>
        <p class="text-muted">Start by adding grades for this subject.</p>
        <a
          href="{{ url_for('teacher_add_grades', subject_id=subject.id) }}"
          class="btn btn-primary"
        >
          <i class="bi bi-plus-lg me-1"></i>Add Grades
        </a>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
