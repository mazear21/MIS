{% extends 'base.html' %} {% block title %}Assign Sections - MIS System{% endblock %} {% block
content %}
<div class="container">
  <!-- Page Header -->
  <div class="page-header">
    <div class="row align-items-center">
      <div class="col">
        <h2><i class="bi bi-diagram-3 me-2"></i>Assign Sections</h2>
        <p>Assign students to classes (A, B, C)</p>
      </div>
      <div class="col-auto">
        <a href="{{ url_for('admin_students') }}" class="btn btn-outline-secondary">
          <i class="bi bi-arrow-left me-1"></i>Back to Students
        </a>
      </div>
    </div>
  </div>

  {% if grouped_students %}
  <form method="POST">
    {% for group_name, students in grouped_students.items() %}
    <div class="card mb-4">
      <div class="card-header bg-navy text-white">
        <i class="bi bi-people-fill me-2"></i>{{ group_name }}
        <span class="badge bg-light text-dark ms-2">{{ students|length }} students</span>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>#</th>
                <th>Student Number</th>
                <th>Full Name</th>
                <th>Email</th>
                <th>Assign Class</th>
              </tr>
            </thead>
            <tbody>
              {% for student in students %}
              <tr>
                <td>{{ loop.index }}</td>
                <td><strong>{{ student.student_number or '-' }}</strong></td>
                <td>{{ student.full_name }}</td>
                <td>{{ student.email or '-' }}</td>
                <td>
                  <select
                    name="section_{{ student.id }}"
                    class="form-select form-select-sm"
                    style="width: 150px"
                  >
                    <option value="">-- Select --</option>
                    <option value="A">Class A</option>
                    <option value="B">Class B</option>
                    <option value="C">Class C</option>
                  </select>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
    {% endfor %}

    <div class="d-flex justify-content-end gap-2 mb-4">
      <a href="{{ url_for('admin_students') }}" class="btn btn-outline-secondary">Cancel</a>
      <button type="submit" class="btn btn-primary">
        <i class="bi bi-check-lg me-1"></i>Save Assignments
      </button>
    </div>
  </form>
  {% else %}
  <div class="card">
    <div class="card-body text-center py-5">
      <i class="bi bi-check-circle text-success" style="font-size: 4rem"></i>
      <h5 class="mt-3">All Students Assigned!</h5>
      <p class="text-muted">All students have been assigned to classes.</p>
      <a href="{{ url_for('admin_students') }}" class="btn btn-primary">
        <i class="bi bi-arrow-left me-1"></i>Back to Students
      </a>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
